import{r as f,j as s,a as E}from"./index-CfX3so9j.js";const K=new Set(["KColumn","KRow","KBox","KCard","KText","KButton","KImage","KSpacer","KIcon","KIconButton","KComponent"]),P=new Set(["kModifier","LModifier","kMargin","kPadding","kBorder","kRounded","kImageUrl","kImageRes","listOf","mapOf"]),M=new Set(["KArrangements","KAlignments","KFontWeights","KTextAlign","KScaleType","KShapes","KGradients"]),B=new Set(["val","true","false","to"]);function y(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function F(n){let t="",e=0;const l=n.length;for(;e<l;){if(n[e]==="/"&&e+1<l&&n[e+1]==="/"){let i=n.indexOf(`
`,e);i===-1&&(i=l),t+=`<span class="hl-comment">${y(n.slice(e,i))}</span>`,e=i;continue}if(n[e]==="/"&&e+1<l&&n[e+1]==="*"){let i=n.indexOf("*/",e);i===-1?i=l:i+=2,t+=`<span class="hl-comment">${y(n.slice(e,i))}</span>`,e=i;continue}if(n[e]==='"'){let i=e+1;for(;i<l&&n[i]!=='"';)n[i]==="\\"&&i++,i++;i<l&&i++,t+=`<span class="hl-string">${y(n.slice(e,i))}</span>`,e=i;continue}if(/[0-9]/.test(n[e])||n[e]==="-"&&e+1<l&&/[0-9]/.test(n[e+1])){let i=e;for(n[i]==="-"&&i++;i<l&&/[0-9.]/.test(n[i]);)i++;i<l&&(n[i]==="f"||n[i]==="F")&&i++,t+=`<span class="hl-number">${y(n.slice(e,i))}</span>`,e=i;continue}if(/[a-zA-Z_]/.test(n[e])){let i=e;for(;i<l&&/[a-zA-Z0-9_]/.test(n[i]);)i++;const c=n.slice(e,i);if(B.has(c))t+=`<span class="hl-keyword">${y(c)}</span>`;else if(K.has(c))t+=`<span class="hl-component">${y(c)}</span>`;else if(M.has(c))t+=`<span class="hl-enum">${y(c)}</span>`;else if(P.has(c))t+=`<span class="hl-function">${y(c)}</span>`;else{let d=i;for(;d<l&&n[d]===" ";)d++;d<l&&n[d]==="="&&(d+1>=l||n[d+1]!=="=")?t+=`<span class="hl-param">${y(c)}</span>`:t+=`<span class="hl-ident">${y(c)}</span>`}e=i;continue}if("(){}=,.".includes(n[e])){t+=`<span class="hl-punct">${y(n[e])}</span>`,e++;continue}t+=y(n[e]),e++}return t}function T({code:n,onChange:t,onRun:e}){const l=f.useRef(null),i=f.useRef(null),c=f.useRef(null),d=f.useRef(null),v=f.useCallback(()=>{const r=l.current;r&&(i.current&&(i.current.scrollTop=r.scrollTop,i.current.scrollLeft=r.scrollLeft),c.current&&(c.current.scrollTop=r.scrollTop))},[]),k=f.useCallback(r=>{const p=l.current;if(p){if((r.metaKey||r.ctrlKey)&&r.key==="s"){r.preventDefault(),e==null||e();return}if((r.metaKey||r.ctrlKey)&&r.key==="Enter"){r.preventDefault(),e==null||e();return}if(r.key==="Tab"){r.preventDefault();const h=p.selectionStart,g=p.selectionEnd,u=n.slice(0,h)+"  "+n.slice(g);t(u),requestAnimationFrame(()=>{p.selectionStart=p.selectionEnd=h+2})}}},[n,t,e]),C=n.split(`
`).length,j=Array.from({length:C},(r,p)=>p+1),o=F(n);return s.jsxs("div",{className:"code-editor",ref:d,children:[s.jsx("div",{className:"code-editor-gutter",ref:c,children:j.map(r=>s.jsx("div",{className:"code-editor-line-number",children:r},r))}),s.jsxs("div",{className:"code-editor-body",children:[s.jsx("pre",{ref:i,className:"code-editor-highlight","aria-hidden":"true",dangerouslySetInnerHTML:{__html:o+`
`}}),s.jsx("textarea",{ref:l,className:"code-editor-textarea",value:n,onChange:r=>t(r.target.value),onScroll:v,onKeyDown:k,spellCheck:!1,autoCapitalize:"off",autoCorrect:"off",autoComplete:"off","data-gramm":"false"})]})]})}function $({jsonData:n}){const t=(o,r)=>{if(!o||!o.type)return null;const{type:p,props:h={},children:g=[]}=o,{modifier:u={},...N}=h,m={...e(u),...l()};switch(p){case"Column":return s.jsx("div",{style:{...m,display:"flex",flexDirection:"column",...i(h)},children:g.map((x,b)=>t(x,b))},r);case"Row":return s.jsx("div",{style:{...m,display:"flex",flexDirection:"row",...i(h)},children:g.map((x,b)=>t(x,b))},r);case"Box":return s.jsx("div",{style:{...m,position:"relative",display:"flex",...c(h)},children:g.map((x,b)=>t(x,b))},r);case"Card":return s.jsx("div",{style:{...m,borderRadius:d(h.shape),backgroundColor:h.containerColor||"#fff",border:h.border?`${h.border.width}px solid ${h.border.color}`:"none",boxShadow:h.elevation?`0 ${h.elevation}px ${h.elevation*2}px rgba(0,0,0,0.2)`:"none",overflow:"hidden"},children:g.map((x,b)=>t(x,b))},r);case"Text":return s.jsx("span",{style:{...m,fontSize:h.fontSize?`${h.fontSize}px`:"16px",fontWeight:v(h.fontWeight),color:h.color||"#000",textAlign:h.textAlign||"left",whiteSpace:"pre-line"},children:h.text},r);case"Spacer":return s.jsx("div",{style:{width:h.width?`${h.width}px`:"auto",height:h.height?`${h.height}px`:"auto"}},r);case"Button":return s.jsx("button",{style:{...m,backgroundColor:h.containerColor||"#007bff",border:"none",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:x=>{x.currentTarget.style.opacity="0.9",x.currentTarget.style.transform="scale(1.02)"},onMouseLeave:x=>{x.currentTarget.style.opacity="1",x.currentTarget.style.transform="scale(1)"},children:g.map((x,b)=>t(x,b))},r);case"Image":const S=C(h.source);return s.jsx("img",{src:S||"https://via.placeholder.com/200",alt:h.contentDescription||"Image",style:{...m,objectFit:k(h.scaleType),width:u.fillMaxSize?"100%":u.width?`${u.width}px`:"auto",height:u.fillMaxSize?"100%":u.height?`${u.height}px`:"auto"}},r);case"Component":return j(h.name,h.properties,r);default:return null}},e=o=>{const r={};if(o.fillMaxSize&&(r.width="100%",r.height="100%"),o.fillMaxWidth&&(r.width=`${o.fillMaxWidth*100}%`),o.width&&(r.width=`${o.width}px`),o.height&&(r.height=`${o.height}px`),o.padding){const p=o.padding;r.padding=p.all?`${p.all}px`:`${p.vertical||p.top||0}px ${p.horizontal||p.right||0}px ${p.vertical||p.bottom||0}px ${p.horizontal||p.left||0}px`}if(o.margin){const p=o.margin;r.margin=p.all?`${p.all}px`:`${p.vertical||p.top||0}px ${p.horizontal||p.right||p.start||0}px ${p.vertical||p.bottom||0}px ${p.horizontal||p.left||p.start||0}px`}if(o.background&&(r.backgroundColor=o.background),o.rotation&&(r.transform=`rotate(${o.rotation}deg)`),o.gradient){const p=o.gradient,h=p.direction==="vertical"?"180deg":"90deg";r.background=`linear-gradient(${h}, ${p.colors.join(", ")})`}return r},l=(o,r)=>({}),i=o=>{const r={};if(o.verticalArrangement)switch(o.verticalArrangement){case"center":r.justifyContent="center";break;case"spaceEvenly":r.justifyContent="space-evenly";break;case"spaceAround":r.justifyContent="space-around";break;case"spaceBetween":r.justifyContent="space-between";break}if(o.horizontalArrangement)switch(o.horizontalArrangement){case"center":r.justifyContent="center";break;case"spaceEvenly":r.justifyContent="space-evenly";break;case"spaceAround":r.justifyContent="space-around";break;case"spaceBetween":r.justifyContent="space-between";break}if(o.horizontalAlignment)switch(o.horizontalAlignment){case"centerHorizontally":r.alignItems="center";break;case"start":r.alignItems="flex-start";break;case"end":r.alignItems="flex-end";break}if(o.verticalAlignment)switch(o.verticalAlignment){case"centerVertically":r.alignItems="center";break;case"bottom":r.alignItems="flex-end";break;case"top":r.alignItems="flex-start";break}return r},c=o=>{const r={};if(o.contentAlignment)switch(o.contentAlignment){case"center":r.justifyContent="center",r.alignItems="center";break;case"bottomCenter":r.justifyContent="center",r.alignItems="flex-end";break;case"topCenter":r.justifyContent="center",r.alignItems="flex-start";break}return r},d=o=>{if(!o)return"0px";if(o.includes("rounded_corners_")){const r=o.replace("rounded_corners_","").split("_");return`${r[0]}px ${r[1]}px ${r[2]}px ${r[3]}px`}return o.includes("rounded_")?`${o.replace("rounded_","")}px`:"0px"},v=o=>{if(!o)return"normal";switch(o){case"bold":return"700";case"semiBold":return"600";case"medium":return"500";case"light":return"300";default:return"400"}},k=o=>{switch(o){case"fillBounds":return"fill";case"centerCrop":return"cover";default:return"contain"}},C=o=>o?typeof o=="string"?o:o.type==="url"?o.value:o.type==="res"?"https://via.placeholder.com/400x300/3b82f6/ffffff?text=Image+Placeholder":null:null,j=(o,r,p)=>{switch(o){case"UserCard":return s.jsxs("div",{style:{padding:"16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r.isOnline?"#22c55e":"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"bold"},children:r.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:"bold",color:"#fff"},children:r.name}),s.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.6)"},children:r.email})]}),s.jsx("div",{style:{marginLeft:"auto",width:"8px",height:"8px",borderRadius:"50%",background:r.isOnline?"#22c55e":"#6b7280"}})]},p);case"StatsCard":return s.jsxs("div",{style:{padding:"20px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",minWidth:"140px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.6)",marginBottom:"8px"},children:r.title}),s.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:r.color,marginBottom:"4px"},children:r.value}),s.jsx("div",{style:{fontSize:"14px",color:"#22c55e"},children:r.subtitle})]},p);case"ActionButton":const h={primary:{bg:"#3b82f6",color:"#fff"},secondary:{bg:"rgba(255,255,255,0.1)",color:"#fff"},danger:{bg:"#ef4444",color:"#fff"}},g=h[r.variant]||h.primary,u={small:"8px 12px",medium:"10px 16px",large:"12px 20px"},N=u[r.size]||u.medium;return s.jsxs("button",{style:{padding:N,background:g.bg,color:g.color,border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:m=>{m.currentTarget.style.opacity="0.9",m.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:m=>{m.currentTarget.style.opacity="1",m.currentTarget.style.transform="translateY(0)"},children:[r.icon&&s.jsx("span",{children:r.icon}),r.text]},p);default:return s.jsxs("div",{children:["Unknown component: ",o]},p)}};try{const o=typeof n=="string"?JSON.parse(n):n;return s.jsx("div",{style:{width:"100%",maxWidth:"400px",margin:"0 auto",background:"#f8f9fa",minHeight:"600px",overflowY:"auto",overflowX:"hidden"},children:t(o,0)})}catch(o){return s.jsxs("div",{style:{padding:"20px",color:"#ef4444",textAlign:"center"},children:[s.jsx("strong",{children:"Error rendering UI:"}),s.jsx("pre",{style:{marginTop:"10px",fontSize:"12px",textAlign:"left"},children:o.message})]})}}function w(n){if(typeof n!="string")return n;const t=n.match(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{6})$/);if(!t)return n;const e=t[1],l=t[2];return e.toUpperCase()==="FF"?`#${l}`:`#${l}${e}`}function A(n){if(!n||typeof n!="object")return n;const t={...n};if(t.props){t.props={...t.props};for(const e of["color","containerColor","iconColor"])typeof t.props[e]=="string"&&(t.props[e]=w(t.props[e]));t.props.border&&(t.props.border={...t.props.border},typeof t.props.border.color=="string"&&(t.props.border.color=w(t.props.border.color))),t.props.modifier&&(t.props.modifier={...t.props.modifier},typeof t.props.modifier.background=="string"&&(t.props.modifier.background=w(t.props.modifier.background)),t.props.modifier.gradient&&t.props.modifier.gradient.colors&&(t.props.modifier.gradient={...t.props.modifier.gradient,colors:t.props.modifier.gradient.colors.map(w)}))}return Array.isArray(t.children)&&(t.children=t.children.map(A)),t}function I({jsonData:n,error:t}){const e=f.useMemo(()=>n?A(n):null,[n]);return s.jsx("div",{className:"phone-mock-wrapper",children:s.jsx("div",{className:"phone-mock",children:s.jsxs("div",{className:"phone-frame",children:[s.jsx("div",{className:"phone-bezel-top",children:s.jsx("div",{className:"phone-camera"})}),s.jsxs("div",{className:"phone-status-bar",children:[s.jsx("span",{className:"phone-status-time",children:"9:41"}),s.jsxs("div",{className:"phone-status-icons",children:[s.jsxs("svg",{width:"14",height:"10",viewBox:"0 0 14 10",fill:"currentColor",children:[s.jsx("rect",{x:"0",y:"6",width:"2",height:"4",rx:"0.5",opacity:"0.3"}),s.jsx("rect",{x:"3",y:"4",width:"2",height:"6",rx:"0.5",opacity:"0.5"}),s.jsx("rect",{x:"6",y:"2",width:"2",height:"8",rx:"0.5",opacity:"0.7"}),s.jsx("rect",{x:"9",y:"0",width:"2",height:"10",rx:"0.5"})]}),s.jsx("svg",{width:"14",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"})}),s.jsxs("svg",{width:"20",height:"10",viewBox:"0 0 25 12",fill:"currentColor",children:[s.jsx("rect",{x:"0",y:"1",width:"21",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.4"}),s.jsx("rect",{x:"1.5",y:"2.5",width:"14",height:"7",rx:"1",fill:"currentColor",opacity:"0.8"}),s.jsx("rect",{x:"22",y:"3.5",width:"2",height:"5",rx:"0.5",opacity:"0.3"})]})]})]}),s.jsx("div",{className:"phone-screen",children:t?s.jsxs("div",{className:"phone-screen-error",children:[s.jsx("div",{className:"phone-screen-error-icon",children:"⚠️"}),s.jsx("div",{className:"phone-screen-error-title",children:"Parse Error"}),s.jsx("div",{className:"phone-screen-error-msg",children:t})]}):n?s.jsx("div",{className:"phone-screen-content",children:s.jsx($,{jsonData:e})}):s.jsxs("div",{className:"phone-screen-empty",children:[s.jsx("div",{className:"phone-screen-empty-icon",children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"1.5",children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),s.jsx("path",{d:"M3 9h18M9 21V9"})]})}),s.jsxs("p",{children:["Write K-DSL code and press",s.jsx("br",{}),s.jsx("strong",{children:"Run"})," to see your UI"]})]})}),s.jsxs("div",{className:"phone-nav-bar",children:[s.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:s.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),s.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("circle",{cx:"12",cy:"12",r:"4"})}),s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})]}),s.jsx("div",{className:"phone-bezel-bottom"})]})})})}const a={IDENT:"IDENT",STRING:"STRING",NUMBER:"NUMBER",BOOL:"BOOL",LPAREN:"(",RPAREN:")",LBRACE:"{",RBRACE:"}",EQ:"=",COMMA:",",DOT:".",EOF:"EOF"};function O(n){const t=[];let e=0;const l=n.length;for(;e<l;){const i=n[e];if(/\s/.test(i)){e++;continue}if(i==="/"&&e+1<l&&n[e+1]==="/"){for(;e<l&&n[e]!==`
`;)e++;continue}if(i==="/"&&e+1<l&&n[e+1]==="*"){for(e+=2;e<l-1&&!(n[e]==="*"&&n[e+1]==="/");)e++;e+=2;continue}if(i==='"'){e++;let c="";for(;e<l&&n[e]!=='"';){if(n[e]==="\\"&&e+1<l)switch(e++,n[e]){case"n":c+=`
`;break;case"t":c+="	";break;case"\\":c+="\\";break;case'"':c+='"';break;default:c+=n[e]}else c+=n[e];e++}e++,t.push({type:a.STRING,value:c});continue}if(/[0-9]/.test(i)||i==="-"&&e+1<l&&/[0-9]/.test(n[e+1])){let c="";for(i==="-"&&(c+="-",e++);e<l&&/[0-9.]/.test(n[e]);)c+=n[e],e++;e<l&&(n[e]==="f"||n[e]==="F")&&e++,t.push({type:a.NUMBER,value:parseFloat(c)});continue}if(/[a-zA-Z_]/.test(i)){let c="";for(;e<l&&/[a-zA-Z0-9_]/.test(n[e]);)c+=n[e],e++;c==="true"||c==="false"?t.push({type:a.BOOL,value:c==="true"}):t.push({type:a.IDENT,value:c});continue}switch(i){case"(":t.push({type:a.LPAREN}),e++;continue;case")":t.push({type:a.RPAREN}),e++;continue;case"{":t.push({type:a.LBRACE}),e++;continue;case"}":t.push({type:a.RBRACE}),e++;continue;case"=":t.push({type:a.EQ}),e++;continue;case",":t.push({type:a.COMMA}),e++;continue;case".":t.push({type:a.DOT}),e++;continue}e++}return t.push({type:a.EOF}),t}const R={KColumn:"Column",KRow:"Row",KBox:"Box",KCard:"Card",KText:"Text",KButton:"Button",KImage:"Image",KSpacer:"Spacer",KIcon:"Icon",KIconButton:"IconButton",KComponent:"Component"};new Set(Object.keys(R));const z={KFontWeights:{Bold:"bold",SemiBold:"semiBold",Medium:"medium",Light:"light",Normal:"normal"},KArrangements:{Center:"center",SpaceEvenly:"spaceEvenly",SpaceAround:"spaceAround",SpaceBetween:"spaceBetween",Start:"start",End:"end"},KAlignments:{CenterHorizontally:"centerHorizontally",CenterVertically:"centerVertically",Center:"center",Start:"start",End:"end",Bottom:"bottom",Top:"top",BottomCenter:"bottomCenter",TopCenter:"topCenter"},KTextAlign:{Center:"center",Start:"start",End:"end",Left:"left",Right:"right"},KScaleType:{FillBounds:"fillBounds",CenterCrop:"centerCrop",Fit:"fit"}};function L(n,t){if(n==="KShapes"){const l=t.match(/^Rounded(\d+)$/);return l?`rounded_${l[1]}`:t.charAt(0).toLowerCase()+t.slice(1)}const e=z[n];return e&&e[t]!==void 0?e[t]:t.charAt(0).toLowerCase()+t.slice(1)}class _{constructor(t){this.tokens=t,this.pos=0}peek(t=0){return this.tokens[Math.min(this.pos+t,this.tokens.length-1)]}advance(){return this.tokens[this.pos++]}expect(t){const e=this.advance();if(e.type!==t)throw new Error(`Expected ${t} but got ${e.type} ("${e.value??""}")`);return e}isNamedParam(){return this.peek().type===a.IDENT&&this.peek(1).type===a.EQ}parse(){return this.skipValDeclaration(),this.parseComponent()}skipValDeclaration(){this.peek().type===a.IDENT&&this.peek().value==="val"&&(this.advance(),this.advance(),this.peek().type===a.EQ&&this.advance())}parseComponent(){const e=this.expect(a.IDENT).value;if(this.peek().type===a.DOT)return this.skipMethodCall(),null;const l=R[e]||e;let i={},c=[];return this.peek().type===a.LPAREN&&(this.advance(),i=this.parseNamedParams(),this.expect(a.RPAREN)),this.peek().type===a.LBRACE&&(this.advance(),c=this.parseChildren(),this.expect(a.RBRACE)),this.buildNode(l,i,c)}skipMethodCall(){for(;this.peek().type===a.DOT;)if(this.advance(),this.peek().type===a.IDENT&&this.advance(),this.peek().type===a.LPAREN){this.advance();let t=1;for(;t>0&&this.peek().type!==a.EOF;)this.peek().type===a.LPAREN&&t++,this.peek().type===a.RPAREN&&t--,t>0&&this.advance();this.peek().type===a.RPAREN&&this.advance()}}parseNamedParams(){const t={};for(;this.peek().type!==a.RPAREN&&this.peek().type!==a.EOF;){if(this.peek().type===a.COMMA){this.advance();continue}const e=this.expect(a.IDENT).value;this.expect(a.EQ),t[e]=this.parseValue()}return t}parseChildren(){const t=[];for(;this.peek().type!==a.RBRACE&&this.peek().type!==a.EOF;){if(this.peek().type===a.IDENT&&this.peek().value==="val"){this.advance(),this.advance(),this.peek().type===a.EQ&&this.advance();continue}if(this.peek().type===a.COMMA){this.advance();continue}const e=this.parseComponent();e&&t.push(e)}return t}parseValue(){const t=this.peek();if(t.type===a.STRING)return this.advance(),t.value;if(t.type===a.NUMBER)return this.advance(),t.value;if(t.type===a.BOOL)return this.advance(),t.value;if(t.type===a.LBRACE)return this.parseLambda();if(t.type===a.IDENT){const e=this.advance().value;if(this.peek().type===a.LPAREN)return this.parseFunctionCall(e);if(this.peek().type===a.DOT){this.advance();const l=this.expect(a.IDENT).value;return this.peek().type===a.LPAREN?this.parseNamespaceCall(e,l):L(e,l)}return e}throw new Error(`Unexpected token: ${t.type}`)}parseLambda(){this.expect(a.LBRACE);let t=1;for(;t>0&&this.peek().type!==a.EOF;)this.peek().type===a.LBRACE&&t++,this.peek().type===a.RBRACE&&t--,t>0&&this.advance();return this.expect(a.RBRACE),"__action__"}parseFunctionCall(t){switch(this.advance(),t){case"kModifier":case"LModifier":{const e=this.parseNamedParams();return this.expect(a.RPAREN),{__kModifier:!0,...e}}case"kMargin":case"kPadding":{const e=this.parseNamedParams();return this.expect(a.RPAREN),e}case"kBorder":{const e=this.parseNamedParams();return this.expect(a.RPAREN),e}case"kRounded":{const e=this.parseNamedParams();this.expect(a.RPAREN);const{topStart:l=0,topEnd:i=0,bottomEnd:c=0,bottomStart:d=0}=e;return`rounded_corners_${l}_${i}_${c}_${d}`}case"kImageUrl":{const e=this.parsePositionalArgs();return this.expect(a.RPAREN),{type:"url",value:e[0]||""}}case"kImageRes":{const e=this.parsePositionalArgs();return this.expect(a.RPAREN),{type:"res",value:e[0]||""}}case"listOf":{const e=this.parsePositionalArgs();return this.expect(a.RPAREN),e}case"mapOf":{const e=this.parseMapEntries();return this.expect(a.RPAREN),e}default:{if(this.isNamedParam()){const l=this.parseNamedParams();return this.expect(a.RPAREN),l}const e=this.parsePositionalArgs();return this.expect(a.RPAREN),e.length===1?e[0]:e}}}parseNamespaceCall(t,e){if(this.advance(),t==="KShapes"&&e==="rounded"){if(this.isNamedParam()){const c=this.parseNamedParams();this.expect(a.RPAREN);const{topStart:d=0,topEnd:v=0,bottomEnd:k=0,bottomStart:C=0}=c;return`rounded_corners_${d}_${v}_${k}_${C}`}const i=this.parsePositionalArgs();return this.expect(a.RPAREN),`rounded_${i[0]||0}`}if(t==="KGradients"){const i=this.parseNamedParams();return this.expect(a.RPAREN),{type:e.toLowerCase(),...i}}const l=this.isNamedParam()?this.parseNamedParams():{args:this.parsePositionalArgs()};return this.expect(a.RPAREN),{type:e.charAt(0).toLowerCase()+e.slice(1),...l}}parsePositionalArgs(){const t=[];for(;this.peek().type!==a.RPAREN&&this.peek().type!==a.EOF;){if(this.peek().type===a.COMMA){this.advance();continue}t.push(this.parseValue())}return t}parseMapEntries(){const t={};for(;this.peek().type!==a.RPAREN&&this.peek().type!==a.EOF;){if(this.peek().type===a.COMMA){this.advance();continue}const e=this.parseValue();this.peek().type===a.IDENT&&this.peek().value==="to"&&this.advance();const l=this.parseValue();t[e]=l}return t}buildNode(t,e,l){const i={},c={};for(const[v,k]of Object.entries(e))if(v==="modifier"&&k&&k.__kModifier){const{__kModifier:C,...j}=k;Object.assign(i,j)}else c[v]=k;const d={type:t,props:{...c},children:l};return Object.keys(i).length>0&&(d.props.modifier=i),(!l||l.length===0)&&delete d.children,d}}function D(n){try{const t=O(n);return{json:new _(t).parse(),error:null}}catch(t){return{json:null,error:t.message}}}const W=`// Simple Card Example
KColumn(
  modifier = kModifier(
    fillMaxSize = 1.0f,
    padding = kPadding(all = 16),
    background = "#FFF8FAFC"
  ),
  verticalArrangement = KArrangements.Center,
  horizontalAlignment = KAlignments.CenterHorizontally
) {
  KCard(
    modifier = kModifier(fillMaxWidth = 1.0f),
    shape = KShapes.Rounded16,
    containerColor = "#FF1E293B",
    elevation = 8
  ) {
    KColumn(
      modifier = kModifier(padding = kPadding(all = 24)),
      horizontalAlignment = KAlignments.CenterHorizontally
    ) {
      KImage(
        source = kImageUrl("https://api.dicebear.com/9.x/shapes/svg?seed=Sophie"),
        modifier = kModifier(width = 80, height = 80),
        contentDescription = "Avatar",
        scaleType = KScaleType.CenterCrop
      )

      KSpacer(height = 12)

      KText(
        text = "Hello, Developer!",
        fontSize = 22,
        fontWeight = KFontWeights.Bold,
        color = "#FFFFFFFF"
      )

      KSpacer(height = 4)

      KText(
        text = "Welcome to Ketoy Playground",
        fontSize = 14,
        color = "#FF94A3B8"
      )
    }
  }

  KSpacer(height = 16)

  KRow(
    modifier = kModifier(fillMaxWidth = 1.0f),
    horizontalArrangement = KArrangements.SpaceEvenly
  ) {
    KButton(containerColor = "#FF3B82F6") {
      KText(text = "Get Started", color = "#FFFFFFFF", fontSize = 14)
    }
    KButton(containerColor = "#FF10B981") {
      KText(text = "Learn More", color = "#FFFFFFFF", fontSize = 14)
    }
  }

  KSpacer(height = 16)

  KBox(
    modifier = kModifier(
      fillMaxWidth = 1.0f,
      padding = kPadding(all = 16),
      background = "#FFE0F2FE"
    ),
    contentAlignment = KAlignments.Center
  ) {
    KText(
      text = "Build beautiful UIs with K-DSL",
      fontSize = 16,
      fontWeight = KFontWeights.Medium,
      color = "#FF1E40AF",
      textAlign = KTextAlign.Center
    )
  }
}`;function H(){const[n,t]=f.useState(W),[e,l]=f.useState(null),[i,c]=f.useState(null),[d,v]=f.useState("editor"),[k,C]=f.useState(!1),j=f.useRef(null),o=f.useCallback(()=>{const{json:g,error:u}=D(n);u?(c(u),l(null)):(c(null),l(g))},[n]);f.useEffect(()=>(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{o()},600),()=>clearTimeout(j.current)),[n,o]),f.useEffect(()=>{o()},[]);const r=e?JSON.stringify(e,null,2):"",p=f.useCallback(g=>{if(!g)return 0;let u=1;return g.children&&g.children.forEach(N=>{u+=p(N)}),u},[]),h=f.useMemo(()=>e?p(e):0,[e,p]);return s.jsxs("div",{className:"pg-root",children:[s.jsxs("header",{className:"pg-header",children:[s.jsxs("div",{className:"pg-header-left",children:[s.jsxs(E,{to:"/",className:"pg-logo",children:[s.jsx("img",{src:"/ketoy-logo.svg",alt:"Ketoy",width:"24",height:"24"}),s.jsx("span",{children:"Ketoy"})]}),s.jsx("div",{className:"pg-header-sep"}),s.jsx("span",{className:"pg-header-title",children:"Playground"})]}),s.jsxs("div",{className:"pg-header-right",children:[s.jsxs("button",{className:"pg-run-btn",onClick:o,title:"Run (⌘S / Ctrl+S)",children:[s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("polygon",{points:"5,3 19,12 5,21"})}),"Run"]}),s.jsxs(E,{to:"/",className:"pg-home-btn",children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Home"]})]})]}),s.jsxs("main",{className:"pg-main",children:[s.jsxs("div",{className:"pg-panel-left",children:[s.jsxs("div",{className:"pg-editor-tabs",children:[s.jsxs("button",{className:`pg-tab ${d==="editor"?"active":""}`,onClick:()=>v("editor"),children:[s.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("polyline",{points:"16 18 22 12 16 6"}),s.jsx("polyline",{points:"8 6 2 12 8 18"})]}),"main.kdsl"]}),s.jsxs("button",{className:`pg-tab ${d==="json"?"active":""}`,onClick:()=>v("json"),children:[s.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),s.jsx("polyline",{points:"14 2 14 8 20 8"})]}),"output.json"]}),s.jsx("div",{className:"pg-tab-spacer"}),s.jsx("div",{className:"pg-tab-info",children:i?s.jsxs("span",{className:"pg-tab-error",children:[s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",style:{color:"#3b82f6"},children:s.jsx("circle",{cx:"12",cy:"12",r:"10"})}),"Error"]}):s.jsxs("span",{className:"pg-tab-ok",children:[s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",style:{color:"#3b82f6"},children:s.jsx("circle",{cx:"12",cy:"12",r:"10"})}),h," components"]})})]}),s.jsx("div",{className:"pg-editor-area",children:d==="editor"?s.jsx(T,{code:n,onChange:t,onRun:o}):s.jsx("div",{className:"pg-json-viewer",children:s.jsx("pre",{children:r||(i?`// Error: ${i}`:"// No output")})})}),i&&s.jsxs("div",{className:"pg-error-bar",children:[s.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),s.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),s.jsx("span",{children:i})]})]}),s.jsx("div",{className:"pg-panel-right",children:s.jsx(I,{jsonData:e,error:i})})]}),s.jsxs("footer",{className:"pg-status-bar",children:[s.jsxs("div",{className:"pg-status-left",children:[s.jsx("span",{children:"K-DSL"}),s.jsx("span",{className:"pg-status-sep",children:"|"}),s.jsxs("span",{children:[n.split(`
`).length," lines"]})]}),s.jsx("div",{className:"pg-status-center",children:s.jsx("span",{className:"pg-status-hint",children:"⌘S / Ctrl+S to run"})}),s.jsx("div",{className:"pg-status-right",children:s.jsx("span",{className:i?"pg-status-err":"pg-status-ok",children:i?"Parse Error":"Ready"})})]})]})}export{H as default};
